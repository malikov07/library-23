{% extends 'base.html' %}
{% load static %}
{% block content %}
<style>
    .accordion-button {
        font-size: 16px;
        padding: 0.5rem 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
    }

    .accordion-body {
        padding: 0.5rem 1rem;
    }

    .desktop-layout .accordion-button .col-md-3,
    .mobile-layout .accordion-button .col-md-3 {
        flex: 1;
        display: flex;
        justify-content: center;
    }

    @media (min-width: 768px) {
        .desktop-layout {
            display: block;
        }
        
        .mobile-layout {
            display: none;
        }
    }

    @media (max-width: 767px) {
        .desktop-layout {
            display: none;
        }
        
        .mobile-layout {
            display: block;
        }

        .table th, .table td {
            font-size: 12px;
            padding: 0.3rem;
            text-align: center;
        }

        .table th {
            width: 30%;
        }
    }
</style>

<script>

    function goBack() {
        window.history.back();
    }
    </script>
<div class="container overflow-hidden">
    <button class="btn btn-primary mt-3" onclick="goBack()"><i
        class="bi bi-arrow-left h2"></i></button>
    <div class="row mb-3">
        <div class="col-sm-12">
            <div class="title-box text-center" data-aos="fade-up" data-aos-duration="1000">
                <h3 class="title-a mt-3" data-aos="fade-right" data-aos-duration="2000">
                    O'quvchilar
                </h3>
                <p class="subtitle-a" data-aos="fade-left" data-aos-duration="1000">
                    Maktabimizda jami {{ count }} ta o'quvchi mavjud
                </p>
                <div class="line-mf"></div>
            </div>
        </div>
    </div>
</div>

<div style="background-color: rgb(233, 233, 233);">
    <!-- Desktop Layout -->
    <div class="container bg-light p-3 desktop-layout" style="border-radius: 15px;">
        <div class="accordion" id="studentsAccordion">
            {% for sinf, students in students_by_class.items %}
            <div class="accordion-item">
                <h2 class="accordion-header" id="heading{{ forloop.counter }}">
                    <button class="accordion-button collapsed p-3" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ forloop.counter }}" aria-expanded="false" aria-controls="collapse{{ forloop.counter }}">
                        <div class="row text-center d-flex justify-content-between align-items-center w-100">
                            <div class="col-md-4 col-sm-6">
                                <strong>#{{ forloop.counter }}</strong>
                            </div>
                            <div class="col-md-4 col-sm-6">
                                {{ sinf }}-sinf
                            </div>
                            <div class="col-md-4 col-sm-6">
                                {{ students|length }} ta o'quvchi
                            </div>
                        </div>
                    </button>
                </h2>
                <div id="collapse{{ forloop.counter }}" class="accordion-collapse collapse" aria-labelledby="heading{{ forloop.counter }}" data-bs-parent="#studentsAccordion">
                    <div class="accordion-body">
                        <div class="table-responsive">
                            <table class="table border border-dark table-hover table-striped">
                                <thead>
                                    <tr style="background-color: rgb(199, 199, 199);">
                                        <th scope="col">#</th>
                                        <th scope="col">Ismi</th>
                                        <th scope="col">Familiyasi</th>
                                        <th scope="col">Otchestvasi</th>
                                        <th scope="col">Tugilgan sanasi</th>
                                        <th scope="col">Telefon raqam</th>
                                        <th scope="col">Address</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for student in students %}
                                    <tr>
                                        <th scope="row">{{ forloop.counter }}</th>
                                        <td>{{ student.first_name }}</td>
                                        <td>{{ student.last_name }}</td>
                                        <td>{{ student.third_name }}</td>
                                        <td>{{ student.birth_date }}</td>
                                        <td>{{ student.phone_number }}</td>
                                        <td>{{ student.address }}</td>
                                    </tr>
                                    {% empty %}
                                    <tr>
                                        <td colspan="7">No students</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Mobile Layout -->
    <div class="container bg-light p-3 mobile-layout" style="border-radius: 15px;">
        <div class="accordion" id="studentsAccordionMobile">
            {% for sinf, students in students_by_class.items %}
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingMobile{{ forloop.counter }}">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMobile{{ forloop.counter }}" aria-expanded="false" aria-controls="collapseMobile{{ forloop.counter }}">
                        <div class="d-flex justify-content-between w-100" style="font-size: 12px;">
                            <div><strong>#{{ forloop.counter }}</strong></div>
                            <div>{{ sinf }}-sinf</div>
                            <div>{{ students|length }} ta o'quvchi</div>
                            <div ><a href="#" class="btn btn-primary btn-sm"  style="font-size: 12px;">o'quvchi qo'shish</a></div>
                        </div>
                    </button>
                </h2>
                <div id="collapseMobile{{ forloop.counter }}" class="accordion-collapse collapse" aria-labelledby="headingMobile{{ forloop.counter }}" data-bs-parent="#studentsAccordionMobile">
                    <div class="accordion-body">
                        {% for student in students %}
                        <table class="table table-bordered mb-3 table-striped">
                            <tbody>
                                <tr>
                                    <th style="background-color: rgb(189, 189, 189);">#</th>
                                    <td style="background-color: rgb(189, 189, 189);">{{ forloop.counter }}</td>
                                </tr>
                                <tr>
                                    <th>Ismi</th>
                                    <td>{{ student.first_name }}</td>
                                </tr>
                                <tr>
                                    <th>Familiyasi</th>
                                    <td>{{ student.last_name }}</td>
                                </tr>
                                <tr>
                                    <th>Otchestvasi</th>
                                    <td>{{ student.third_name }}</td>
                                </tr>
                                <tr>
                                    <th>Tugilgan sanasi</th>
                                    <td>{{ student.birth_date }}</td>
                                </tr>
                                <tr>
                                    <th>Telefon raqam</th>
                                    <td>+{{ student.phone_number }}</td>
                                </tr>
                                <tr>
                                    <th>Address</th>
                                    <td>{{ student.address }}</td>
                                </tr>
                            </tbody>
                        </table>
                        {% empty %}
                        <p>No students</p>
                        {% endfor %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
